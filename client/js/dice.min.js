var Dice=Dice||function(){function u(e,t){if(r.debug)console.log(e+": "+t)}function a(e,t,n){var r=document.createElement(e);if(t!=undefined)r.id=t;if(n!=undefined)r.className=n;return r}function f(e){for(var t in e){for(var n in r){if(t==n)r[t]=e[t]}}}function l(){var e=t<r.diceFaces?1:Math.ceil(t/r.diceFaces);u("Dice Number",e);return e}function c(){var e=d(r.xRange[0],r.xRange[1]),t=d(r.yRange[0],r.yRange[1]);u("X-Turns and Y-Turns",Array(e,t));return Array(e,t)}function h(e,t){var n=[3,6,4,1],r=[[3,5,4,2],[4,2,3,5]],i=e%4,s=t%4,o;if(i==1)o=n[i];else if(i==3)o=n[i];else{if(i==0)o=r[0][s];if(i==2)o=r[1][s]}u("Result for Dice",o);return o}function p(){var e=r.cssProp.split(":"),t=document.createElement("div");for(var n=0,i=e.length;n<i;n++){if(typeof t.style[e[n]]!=="undefined"){u("Found CSS Property",e[n]);return e[n]}}}function d(e,t){var n=Math.floor(Math.random()*(t-e+1))+e;u("Random Twist Number Generated",n);return n}function v(){var t=document.getElementById(r.wrapper)||document.body,i=0,o,u,f,l;for(var p=0;p<s;p++){o=a("div","dice_"+p,r.diceCls.box);m(o);u=a("div","cube_"+p,r.diceCls.cube);g(u);for(var d=0;d<r.diceFaces;d++){diceFace=a("div",undefined,r.diceCls.face+" "+r.diceCls.side+(d+1));y(diceFace);u.appendChild(diceFace)}b(u);f=c();l=h(f[0],f[1]);i+=l;while(p==s-1&&i==n){i-=l;f=c();l=h(f[0],f[1]);i+=l}e.push({div:u,turns:f,result:l});o.appendChild(u);t.appendChild(o)}}function m(e){e.style["-webkit-perspective"]=r.diceSize/2*3;e.style["-moz-perspective"]=r.diceSize/2*3;e.style["-webkit-perspective-origin"]="50%"+r.diceSize/2+"px";e.style["-moz-perspective-origin"]="50%"+r.diceSize/2+"px";e.style["width"]=r.diceSize+"px";e.style["height"]=r.diceSize+"px"}function g(e){e.style["width"]=r.diceSize/2+"px";e.style["height"]=r.diceSize/2+"px";e.style["margin"]=r.diceSize/2/2+"px auto"}function y(e){e.style["width"]=r.diceSize/2+"px";e.style["height"]=r.diceSize/2+"px"}function b(e){e.childNodes[0].style[o]="rotateX(90deg) translateZ("+r.diceSize/4+"px)";e.childNodes[1].style[o]="translateZ("+r.diceSize/4+"px)";e.childNodes[2].style[o]="rotateY(90deg) translateZ("+r.diceSize/4+"px)";e.childNodes[3].style[o]="rotateY(180deg) translateZ("+r.diceSize/4+"px)";e.childNodes[4].style[o]="rotateY(-90deg) translateZ("+r.diceSize/4+"px)";e.childNodes[5].style[o]="rotateX(-90deg) rotate(180deg) translateZ("+r.diceSize/4+"px)"}function w(t){for(var n in e){e[n].div.style[o]="rotateX("+e[n].turns[0]*90+"deg) "+" rotateY("+e[n].turns[1]*90+"deg)"}if(t)t()}function E(){var t=0;for(var n in e){t+=e[n].result}u("Result for all Dices",t);return t}function S(){var e=n;while(e==n){e=d(s*1,s*r.diceFaces)}u("Result for all Dices",e);return e}function x(){var e=n;if(r.animate){v();i=true;e=E()}else e=S();return e}var e=[],t=0,n=0,r={animate:false,debug:false,diceFaces:6,diceSize:200,diceCls:{box:"diceBox",cube:"diceCube",face:"face",side:"side"},wrapper:"body",xRange:[8,16],yRange:[8,16],cssProp:"transform:-webkit-transform:-moz-transform:OTransform:msTransform"},i=false,s,o;return{init:function(e,r,i){t=e;n=r;if(typeof i==="object")f(i);s=l();o=p();return x()},animate:function(e){if(i)w(e)}}}()